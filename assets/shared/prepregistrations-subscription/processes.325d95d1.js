var Ie=Object.defineProperty,Ke=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Ce=(e,o,b)=>o in e?Ie(e,o,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[o]=b,z=(e,o)=>{for(var b in o||(o={}))He.call(o,b)&&Ce(e,b,o[b]);if(we)for(var b of we(o))xe.call(o,b)&&Ce(e,b,o[b]);return e},G=(e,o)=>Ke(e,Xe(o));import{n as Pe,X as M,_ as ee,K as Je,l as Ne,L as ke,M as H,k as Qe,i as Ye,C as Ze,E as es,F as ss,D as je,N as os,O as ts}from"../../common.017a279d.js";import{u as $}from"../../@vueuse/core.ebf6af6e.js";import{d as x,r as B,w as Le,c as v,t as Oe,o as m,a as A,l as u,v as N,_ as De,E as V,b as t,m as L,F as se,Y as _,j as as,k as I,n as Ve,x as ns,p as C,W as rs,O as D,D as Se,a3 as ls,a4 as $e}from"../../vendor.1f347d3d.js";import{c as ds,a as is,b as us,d as cs,f as ms,g as gs,e as fs,h as ps,i as vs,j as bs,k as hs,l as ys,m as As,n as Ss,o as Ls,p as Ps,q as Es,r as _s,s as ws,t as Cs,u as Ns,v as ks,w as js,x as $s,y as Os,z as Ds,A as Vs,B as Rs,C as Bs,D as Fs,E as Ts,F as Us,G as Ws,H as qs,I as zs,J as Gs,K as Ms,L as Is,M as Ks,N as Xs}from"../../geolib.7538e95a.js";const Hs={class:"row"},xs=x({__name:"AddressFields",props:{data:{default:()=>({})},name:{default:""},setFieldValue:null,errors:{default:()=>({})},fetchingAddressLatLng:{type:Boolean,default:!1}},emits:["update:fetchingAddressLatLng","update:fetchingPrimaryAddressLatLng"],setup(e){const o=e,b=Pe(),g=B(),h=B(),l=$(o,"data"),S=$(o,"fetchingAddressLatLng");Le(l,n=>{(n.address||n.number)&&f()},{deep:!0});const P=()=>{const n=b.entity.ibgeCodes;return n.length===0?!0:n.includes(l.value.cityIbgeCode)||l.value.city===window.config.city},y=v(()=>l.value.city&&P()),O=n=>{l.value.address=n.logradouro,l.value.complement=n.complemento,l.value.neighborhood=n.bairro,l.value.city=n.localidade,l.value.stateAbbreviation=n.uf,l.value.cityIbgeCode=Number(n.ibge),o.setFieldValue(`${o.name}.city`,l.value.city),o.setFieldValue(`${o.name}.stateAbbreviation`,l.value.stateAbbreviation),o.setFieldValue(`${o.name}.cityIbgeCode`,l.value.cityIbgeCode),!R.isCityPostalCode()&&g.value?g.value.$refs.validator.setErrors(["O CEP deve ser do munic\xEDpio"]):document.getElementsByName(`${o.name}.number`)[1].focus()},f=()=>{if(S.value||!h.value)return;if(S.value=!0,!l.value.address||!l.value.number){S.value=!1;return}const n=[l.value.address,l.value.number,l.value.city,l.value.stateAbbreviation,l.value.postalCode].filter(c=>c).join(", ");h.value.geocode({address:n},(c,r)=>{r==="OK"&&c&&(l.value.lat=c[0].geometry.location.lat(),l.value.lng=c[0].geometry.location.lng(),o.setFieldValue(`${o.name}.lat`,l.value.lat),o.setFieldValue(`${o.name}.lng`,l.value.lng))}),S.value=!1},j=n=>Boolean(o.errors[`${n}.postalCode`]);Oe(()=>{h.value=new google.maps.Geocoder});const R={isCityPostalCode:P};return(n,c)=>(m(),A("div",Hs,[u(M,{ref_key:"cityPostalCode",ref:g,modelValue:N(l).postalCode,"onUpdate:modelValue":c[0]||(c[0]=r=>N(l).postalCode=r),rules:"required|postal_code","container-class":"form-group col-sm-6",label:"CEP",name:`${e.name}.postalCode`,type:"CEP",errors:j("postalCode"),"onChange:address":O},null,8,["modelValue","name","errors"]),u(M,{modelValue:N(l).address,"onUpdate:modelValue":c[1]||(c[1]=r=>N(l).address=r),rules:"required","container-class":"form-group col-sm-9",label:"Endere\xE7o",name:`${e.name}.address`,type:"TEXT",errors:j("address"),disabled:!N(y)},null,8,["modelValue","name","errors","disabled"]),u(M,{ref:"addressNumber",modelValue:N(l).number,"onUpdate:modelValue":c[2]||(c[2]=r=>N(l).number=r),rules:"required","container-class":"form-group col-sm-3",label:"N\xFAmero",name:`${e.name}.number`,type:"TEXT",errors:j("number"),disabled:!N(y),loading:N(S),onKeydown:f,onBlur:f},null,8,["modelValue","name","errors","disabled","loading"]),u(M,{modelValue:N(l).complement,"onUpdate:modelValue":c[3]||(c[3]=r=>N(l).complement=r),"container-class":"form-group col-sm-6",label:"Complemento",name:`${e.name}.complement`,type:"TEXT",errors:j("complement"),disabled:!N(y)},null,8,["modelValue","name","errors","disabled"]),u(M,{modelValue:N(l).neighborhood,"onUpdate:modelValue":c[4]||(c[4]=r=>N(l).neighborhood=r),rules:"required","container-class":"form-group col-sm-6",label:"Bairro",name:`${e.name}.neighborhood`,type:"TEXT",errors:j("neighborhood"),disabled:!N(y)},null,8,["modelValue","name","errors","disabled"])]))}});class Js{define(){return x({components:{XField:M},props:{data:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})},cities:{type:Array,default:()=>[]}},setup(o){const b=$(o,"fields"),g=$(o,"data");return{modelFields:b,modelData:g,formatRules:l=>{if(typeof l=="string")return l;const S=Object.keys(l),P=[];return S.forEach(y=>{typeof l[y]=="boolean"?l[y]&&P.push(y):P.push(`${y}:${l[y]}`)}),P.join("|")}}}})}}const Qs=new Js().define();function Re(){return Qs}const Ys=x({components:{AddressFields:xs,Fields:Re(),XBtn:ee,XField:M},props:{responsible:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},fetchingPrimaryAddressLatLng:{type:Boolean,default:!1},fetchingSecondaryAddressLatLng:{type:Boolean,default:!1},setFieldValue:{type:Function,required:!1,default:()=>({})}},emits:["clean","update:fetchingPrimaryAddressLatLng","update:fetchingSecondaryAddressLatLng"],setup(e){const o=Pe(),b=$(e,"fields"),g=$(e,"responsible"),h=$(e,"fetchingPrimaryAddressLatLng"),l=$(e,"fetchingSecondaryAddressLatLng");return{store:o,modelFields:b,modelResponsible:g,modelFetchingPrimaryAddressLatLng:h,modelFetchingSecondaryAddressLatLng:l,doesntuseSecondAddress:()=>{g.value.useSecondAddress=!1,g.value.secondAddress=Je()}}}}),Zs=t("h2",{class:"font-muli-20-primary"}," Preencha o formul\xE1rio abaixo para criar sua inscri\xE7\xE3o: ",-1),eo=t("p",null,[_(" Preencha os campos abaixo para identificar os dados do(a) respons\xE1vel pela inscri\xE7\xE3o do(a) aluno(a). Os campos com asterisco (*) s\xE3o de preenchimento "),t("strong",null,"obrigat\xF3rio"),_(" para prosseguir com a inscri\xE7\xE3o. ")],-1),so=t("hr",{class:"mt-5 mb-5"},null,-1),oo={class:"mb-3 d-sm-flex justify-content-between"},to=t("h3",{class:"font-hind-18-primary"}," Dados do(a) respons\xE1vel pelo(a) aluno(a) ",-1),ao=t("p",{class:"mt-4 mb-4"}," V\xEDnculo com o(a) aluno(a) ",-1),no={class:"row"},ro=t("p",{class:"mt-4 mb-4"}," Endere\xE7o residencial ",-1),lo=t("p",{class:"text-muted"},[_(" Digite o "),t("strong",null,"CEP"),_(" que corresponde ao seu endere\xE7o e clique em 'Buscar' para preenchimento autom\xE1tico. Caso seu endere\xE7o n\xE3o seja encontrado, preencha manualmente os campos necess\xE1rios para identific\xE1-lo (endere\xE7o, n\xFAmero, bairro). ")],-1),io={key:0,class:"row mt-5"},uo={class:"col-12 col-md-6 offset-md-3"},co=t("p",{class:"mt-4 mb-4"}," Endere\xE7o secund\xE1rio ",-1),mo={class:"row mt-5"},go={class:"col-12 col-md-6 offset-md-3"};function fo(e,o,b,g,h,l){const S=V("x-btn"),P=V("fields"),y=V("x-field"),O=V("address-fields");return m(),A("div",null,[Zs,eo,so,t("div",oo,[to,u(S,{label:"Limpar dados",class:"border-danger text-danger flex-row","no-caps":"","no-wrap":"",onClick:o[0]||(o[0]=f=>e.$emit("clean"))})]),u(P,{fields:e.modelFields,"onUpdate:fields":o[1]||(o[1]=f=>e.modelFields=f),data:e.modelResponsible,"onUpdate:data":o[2]||(o[2]=f=>e.modelResponsible=f),errors:e.errors},null,8,["fields","data","errors"]),ao,t("div",no,[u(y,{modelValue:e.modelResponsible.relationType,"onUpdate:modelValue":o[3]||(o[3]=f=>e.modelResponsible.relationType=f),"container-class":"col-12 col-md-6 form-group",rules:"required",label:"Rela\xE7\xE3o com o(a) aluno(a)",name:"relationType",type:"SELECT",options:e.store.relationTypes,errors:!!e.errors.relationType},null,8,["modelValue","options","errors"])]),ro,lo,u(O,{fetchingAddressLatLng:e.modelFetchingPrimaryAddressLatLng,"onUpdate:fetchingAddressLatLng":o[4]||(o[4]=f=>e.modelFetchingPrimaryAddressLatLng=f),data:e.modelResponsible.address,"onUpdate:data":o[5]||(o[5]=f=>e.modelResponsible.address=f),"set-field-value":e.setFieldValue,errors:e.errors,name:"address"},null,8,["fetchingAddressLatLng","data","set-field-value","errors"]),e.modelResponsible&&e.store.config.allow_optional_address&&!e.modelResponsible.useSecondAddress?(m(),A("div",io,[t("div",uo,[u(S,{"data-test":"btn-use-second-address",label:"Adicionar endere\xE7o secund\xE1rio",color:"primary",class:"w-100","no-caps":"","no-wrap":"",onClick:o[6]||(o[6]=f=>e.modelResponsible.useSecondAddress=!0)})])])):L("",!0),e.modelResponsible&&e.modelResponsible.useSecondAddress?(m(),A(se,{key:1},[co,u(O,{data:e.modelResponsible.secondAddress,"onUpdate:data":o[7]||(o[7]=f=>e.modelResponsible.secondAddress=f),fetchingAddressLatLng:e.modelFetchingSecondaryAddressLatLng,"onUpdate:fetchingAddressLatLng":o[8]||(o[8]=f=>e.modelFetchingSecondaryAddressLatLng=f),"set-field-value":e.setFieldValue,errors:e.errors,name:"secondAddress"},null,8,["data","fetchingAddressLatLng","set-field-value","errors"]),t("div",mo,[t("div",go,[u(S,{"data-test":"btn-doenst-use-second-address",label:"N\xE3o usar endere\xE7o secund\xE1rio",class:"border-danger text-danger w-100","no-caps":"","no-wrap":"",onClick:e.doesntuseSecondAddress},null,8,["onClick"])])])],64)):L("",!0)])}var qt=De(Ys,[["render",fo]]);const po={class:"d-flex justify-content-between mt-5 mb-3"},vo={class:"d-flex justify-content-end"},zt=x({__name:"SectionTitle",props:{quantityButton:{default:1},titleWidth:{default:"30%"}},setup(e){return(o,b)=>(m(),A("div",po,[u(Ne,{width:e.titleWidth,height:"30px"},null,8,["width"]),t("div",vo,[(m(!0),A(se,null,as(e.quantityButton,g=>(m(),I(Ne,{key:g+"-section-title-qtd-btn",type:"btn",height:"45px",width:"70px",class:Ve({"mr-3":g<e.quantityButton})},null,8,["class"]))),128))])]))}}),bo={class:"col-12 mt-3 mb-3"},ho={class:"row"},yo={key:0,class:"col-12"},Ao={class:"alert alert-warning d-flex flex-column gap-3"},So={class:"d-flex gap-2"},Lo=t("strong",null,"Algumas dicas:",-1),Po=t("ul",{class:"m-0 p-l-start-4-68"},[t("li",null,"Selecione o \xEDcone de localiza\xE7\xE3o em vermelho presente no mapa abaixo"),t("li",null,"Ao selecionar, clique e arraste o \xEDcone para a localiza\xE7\xE3o de sua prefer\xEAncia.")],-1),Eo={key:1,class:"d-flex flex-column gap-3 w-100 p-3"},_o={class:"alert alert-success d-flex flex-column gap-3"},wo={class:"d-flex gap-2"},Co=t("strong",null,"Sua localiza\xE7\xE3o foi alterada com sucesso!",-1),No={class:"d-flex flex-column gap-3"},ko=_(" Caso voc\xEA tenha selecionado a localiza\xE7\xE3o errada, voc\xEA pode clicar no bot\xE3o abaixo para voltar para a localiza\xE7\xE3o original. "),jo=_(" Desfazer altera\xE7\xE3o "),$o={class:"d-flex flex-row-reverse w-100 gap-3"},Oo={key:2,class:"font-muli font-weight-bold text-gray-600 text-size-small"},Do=_(" Esta n\xE3o \xE9 a sua localiza\xE7\xE3o? "),Vo=x({__name:"SelectAddressPosition",props:{allowResponsibleSelectMapAddress:{type:Boolean,default:!1},isUsingSecondAddress:{type:Boolean,default:!1},old:{default:()=>({secondAddress:!1,lat:null,lng:null})},adjusted:{default:()=>({secondAddress:!1,lat:null,lng:null})}},emits:["update:old","update:adjusted","undoAddressPosition","confirmNewLocation","setNewLocation","cancelNewLocation"],setup(e,{emit:o}){const b=e,g=B(!1),h=v(()=>Boolean(l.value.lat)&&Boolean(l.value.lng)),l=$(b,"old"),S=$(b,"adjusted"),P=()=>{S.value=H()},y=()=>{o("undoAddressPosition"),P(),l.value=G(z({},H()),{secondAddress:l.value.secondAddress})},O=()=>{g.value=!1,o("confirmNewLocation")},f=()=>{g.value=!0,P(),o("setNewLocation")},j=()=>{g.value=!1,P(),o("cancelNewLocation")},R=n=>{S.value=G(z({},n),{secondAddress:b.isUsingSecondAddress})};return(n,c)=>(m(),A("div",bo,[t("div",ho,[g.value?(m(),A("div",yo,[t("div",Ao,[t("div",So,[u(ke,{name:"mdi-information-outline"}),Lo]),Po])])):L("",!0),ns(n.$slots,"map",{adjustAddress:g.value,setNewPosition:R}),N(h)?(m(),A("div",Eo,[t("div",_o,[t("div",wo,[u(ke,{name:"mdi-check-circle-outline"}),Co]),t("div",No,[ko,t("div",null,[u(ee,{class:"bg-white text-danger border-danger","no-caps":"",size:"md",onClick:y},{default:C(()=>[jo]),_:1})])])])])):L("",!0),!N(h)&&e.allowResponsibleSelectMapAddress?(m(),A("div",{key:2,class:Ve(["d-flex flex-column gap-3 w-100",{"px-3 py-1":!g.value,"p-3":g.value}])},[t("div",$o,[g.value?(m(),I(ee,{key:0,label:"Confirmar localiza\xE7\xE3o",color:"primary",outline:"","no-caps":"","no-wrap":"",class:"w-50",onClick:O})):L("",!0),g.value?(m(),I(ee,{key:1,label:"Cancelar localiza\xE7\xE3o",color:"gray-500",class:"w-50",outline:"","no-caps":"","no-wrap":"",onClick:j})):(m(),A("span",Oo,[Do,t("span",{class:"text-primary clickable",onClick:f},"Ajuste aqui")]))])],2)):L("",!0)])]))}});var Be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var o={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return pe.default}});var b=i(Ks),g=i(ds),h=i(is),l=i(us),S=i(cs),P=i(ms),y=i(gs),O=i(fs),f=i(ps),j=i(vs),R=i(bs),n=i(hs),c=i(ys),r=i(As),T=i(Ss),k=i(Ls),F=i(Ps),le=i(Es),U=i(_s),K=i(ws),de=i(Cs),ie=i(Ns),oe=i(ks),ue=i(js),ce=i($s),me=i(Os),ge=i(Ds),J=i(Vs),te=i(Rs),X=i(Bs),Q=i(Fs),Y=i(Ts),fe=i(Us),ae=i(Ws),Z=i(qs),ne=i(zs),W=i(Gs),q=i(Ms),pe=i(Is),re=Xs;Object.keys(re).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(o,d)||Object.defineProperty(e,d,{enumerable:!0,get:function(){return re[d]}})});function i(d){return d&&d.__esModule?d:{default:d}}})(Be);const Ro=x({components:{Fields:Re(),XField:M,XBtn:ee,XCard:Qe,XCardSection:Ye,GoogleMaps:Ze,GoogleMapsMarkerComponent:es,GoogleMapsMarkers:ss,SelectAddressPosition:Vo},props:{student:{type:Object,default:()=>({})},stage:{type:Object,default:()=>({})},responsible:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["clean","change-primary-address"],setup(e,{emit:o}){const b=rs("$filters"),g=Pe(),h=B(e.responsible.address),l=B(),S=B(),P=B([]),y=B(!1),O=B(H()),f=B(H()),j=B(H()),R=B(H()),n=$(e,"student"),c=$(e,"stage"),r=$(e,"responsible"),T=$(e,"fields"),k=v(()=>{var s;return(s=c.value)==null?void 0:s.process}),F=v(()=>{var a,p;let s=(a=e.stage)==null?void 0:a.process.grades.map(w=>({key:w.id,label:w.name})).sortBy("label");return P.value.length>0&&((p=e.stage)==null?void 0:p.process.forceSuggestedGrade)===!0&&(s=s==null?void 0:s.filter(w=>P.value.find(E=>E.id===w.key))),s}),le=v(()=>{var s;return(s=c.value)==null?void 0:s.process.periods.map(a=>({key:a.id,label:a.name})).sortBy("label")}),U=v(()=>{var s;return(s=c.value)==null?void 0:s.process.schools.map(a=>G(z({},a),{key:a.id,label:a.name,lat:a.latitude,lng:a.longitude,position:{lat:a.latitude,lng:a.longitude}})).sortBy("label")}),K=v(()=>{var s;return((s=c.value)==null?void 0:s.type)==="WAITING_LIST"}),de=v(()=>K.value?!0:n.value.useSecondSchool&&te.value),ie=v(()=>{var s;return K.value?((s=Z.value)==null?void 0:s.length)===0:J.value?!1:q.value.length===0&&W.value.length>0}),oe=v(()=>K.value?!1:J.value?q.value.length===0:q.value.length===0&&W.value.length===0&&X.value.length>0),ue=v(()=>q.value.length===0&&W.value.length===0&&X.value.length===0),ce=v(()=>!oe.value),me=v(()=>h.value.lat||g.map.center.lat),ge=v(()=>h.value.lng||g.map.center.lng),J=v(()=>{var s;return(s=c.value)==null?void 0:s.renewalAtSameSchool}),te=v(()=>{var s;return(s=c.value)==null?void 0:s.allowWaitingList}),X=v(()=>{var s;return(s=U.value)==null?void 0:s.filter(a=>a.lat&&a.lng).filter(a=>{var w;const p=(w=k.value)==null?void 0:w.vacancies.filter(E=>Number(E.school)===Number(a.id));return n.value.grade&&n.value.period?p==null?void 0:p.find(E=>Number(E.school)!==Number(a.id)||Number(E.grade)!==Number(n.value.grade)?!1:Number(E.period)===Number(n.value.period)):!0})}),Q=v(()=>{var s;return(s=U.value)==null?void 0:s.filter(a=>a.lat&&a.lng).filter(a=>{var w;const p=(w=k.value)==null?void 0:w.vacancies.filter(E=>Number(E.school)===Number(a.id));return n.value.grade&&n.value.secondPeriod?p==null?void 0:p.find(E=>Number(E.school)!==Number(a.id)||Number(E.grade)!==Number(n.value.grade)?!1:Number(E.period)===Number(n.value.secondPeriod)):!0})}),Y=v(()=>{var a;const s=q.value;return n.value.grade&&n.value.period&&s.length===0?(a=c.value)!=null&&a.renewalAtSameSchool?[]:W.value:s}),fe=v(()=>Y.value),ae=v(()=>{var s;return K.value?ne.value:n.value.school?(s=Q.value)==null?void 0:s.filter(a=>Number(a.id)!==Number(n.value.school)):Q.value}),Z=v(()=>{var s;return(s=X.value)==null?void 0:s.filter(a=>he(a))}),ne=v(()=>{let s=Z.value;return s.length===0&&(s=X.value),s}),W=v(()=>{var s;return(s=U.value)==null?void 0:s.filter(a=>a.lat&&a.lng).filter(a=>{var w;const p=(w=k.value)==null?void 0:w.vacancies.filter(E=>Number(E.school)===Number(a.id));return n.value.grade&&n.value.period?p==null?void 0:p.find(E=>Number(E.school)!==Number(a.id)||Number(E.grade)!==Number(n.value.grade)||Number(E.period)!==Number(n.value.period)?!1:E.available>=1):!0})}),q=v(()=>W.value.filter(a=>he(a))||[]),pe=v(()=>G(z({},je()),{position:{lat:h.value.lat,lng:h.value.lng}})),re=v(()=>{var a;let s="S\xE9rie(s) sugerida(s) conforme a idade: ";return P.value&&((a=e.stage)==null?void 0:a.process.forceSuggestedGrade)===!0&&(s="S\xE9rie(s) identificada(s) como correspondente(s) com a faixa et\xE1ria do(a) aluno(a): "),s+P.value.map(p=>p.name).join(", ")}),i=v(()=>{var s;return(s=ae.value)==null?void 0:s.map(a=>({position:{lat:a.lat,lng:a.lng},id:a.id}))}),d=v(()=>G(z({},je()),{position:{lat:h.value.lat,lng:h.value.lng}})),ve=()=>{var s,a;(s=Y.value)!=null&&s.find(p=>Number(p.id)===Number(n.value.school))||(n.value.school=null),(a=U.value)!=null&&a.find(p=>Number(p.id)===Number(n.value.school))||(n.value.secondSchool=null,n.value.secondPeriod=null)},Fe=()=>{n.value.useSecondSchool=!1,n.value.secondSchool=null,n.value.secondPeriod=null},Te=s=>{!s||(n.value.school=s.id)},Ue=s=>{!s||(n.value.secondSchool=s.id)},be=s=>{var p;const a=(p=k.value)==null?void 0:p.grades.filter(w=>w.startBirth&&w.endBirth).filter(w=>os(s,w.startBirth,w.endBirth));a&&(P.value=a)},Ee=()=>{T.value.filter(s=>s.key.substring(0,7)==="student").map(s=>s.key.substring(8)).forEach(s=>{if(r.value[`responsible_${s}`]){const a=r.value[`responsible_${s}`];n.value[`student_${s}`]=a}})},_e=s=>Boolean(n.value.match&&Number(n.value.match.school)===Number(s)),he=s=>{var a;return _e(s.id)?!0:(a=c.value)!=null&&a.renewalAtSameSchool?!1:c.value.radius<=0||Be.isPointWithinRadius({latitude:h.value.lat,longitude:h.value.lng},{latitude:s.latitude,longitude:s.longitude},c.value.radius)},We=()=>{n.value.useSecondSchool=!0,n.value.secondPeriod=n.value.period},qe=()=>{o("change-primary-address",{changed:!0,secondAddress:y.value})},ze=()=>{o("change-primary-address",{changed:!1,secondAddress:!1})},Ge=(s,a)=>{s.secondAddress?(r.value.secondAddress=G(z({},r.value.secondAddress),{lat:a.lat,lng:a.lng}),h.value=r.value.secondAddress):(r.value.address=G(z({},r.value.address),{lat:a.lat,lng:a.lng}),h.value=r.value.address),o("change-primary-address",{changed:!0,secondAddress:s.secondAddress})},Me=s=>{s.secondAddress?(ye(s,"secondAddress"),Ae(r.value.secondAddress)):(ye(s,"address"),Ae(r.value.address)),o("change-primary-address",{changed:!1,secondAddress:s.secondAddress})},ye=(s,a)=>{r.value[a].lat=s.lat,r.value[a].lng=s.lng},Ae=s=>{h.value=s};return Oe(()=>{var s;n.value.match&&(n.value.school=n.value.match.school,l.value=(s=U.value)==null?void 0:s.find(a=>{var p;return Number(a.id)===Number((p=n.value.match)==null?void 0:p.school)}),S.value=F.value.find(a=>{var p;return Number(a.key)===Number((p=n.value.match)==null?void 0:p.grade)})),n.value.student_date_of_birth&&be(n.value.student_date_of_birth),r.value.relationType==="SELF"&&Ee()}),Le(n,(s,a)=>{s.student_date_of_birth!==a.student_date_of_birth&&ts(s.student_date_of_birth)&&be(s.student_date_of_birth),(s.grade!==a.grade||s.period!==a.period)&&ve()},{deep:!0}),Le(F,s=>{s.length===1?n.value.grade=s[0].key:n.value.grade=null}),{filters:b,store:g,selectedAddress:h,matchedSchool:l,matchedGrade:S,suggestedGrades:P,modelStudent:n,modelStage:c,modelResponsible:r,modelFields:T,process:k,grades:F,periods:le,schools:U,isWaitingList:K,showWaitingListOption:de,doesntHaveClosestSchools:ie,doesntHaveSchoolsWithVacancies:oe,doesntHaveAnySchools:ue,haveSchoolsWithVacancies:ce,lat:me,lng:ge,renewalAtSameSchool:J,allowWaitingList:te,allSchools:X,allOptionalsSchools:Q,closestSchools:Y,markerClosestSchools:fe,optionalSchools:ae,schoolsWithinRange:Z,schoolsForWaitingList:ne,schoolsWithVacancy:W,filteredSchools:q,marker:pe,suggestedGradesMessage:re,markerOptionalSchools:i,clearSchools:ve,doesntuseSecondSchool:Fe,selectFirstSchool:Te,selectSecondSchool:Ue,suggestGrade:be,copyDataFromResponsible:Ee,isMatchedSchool:_e,isWithinRange:he,setUseSecondSchool:We,markerAdjustedAddress:d,isUsingSecondAddress:y,adjustedAddressPosition:O,oldAddressPosition:f,adjustedWaitingListAddressPosition:j,oldWaitingListAddressPosition:R,handleSetNewLocation:qe,handleCancelNewLocation:ze,handleConfirmNewLocation:Ge,handleUndoAddressPosition:Me,handleUpdateModelResponsible:ye,handleUpdateSelectedAddress:Ae}}}),Bo=t("h2",{class:"font-muli-20-primary mb-4"}," Preencha o formul\xE1rio abaixo para criar sua inscri\xE7\xE3o: ",-1),Fo=t("p",null,[_(" Preencha os campos abaixo para identificar os dados do(a) aluno(a). Os campos com asterisco (*) s\xE3o de preenchimento "),t("strong",null,"obrigat\xF3rio"),_(" para prosseguir com a inscri\xE7\xE3o. ")],-1),To=t("hr",{class:"mt-5 mb-5"},null,-1),Uo={class:"mb-3 d-flex justify-content-between"},Wo=t("h3",{class:"font-hind-18-primary"}," Dados do(a) aluno(a) ",-1),qo=t("h3",{class:"mt-4 font-hind-18-primary"}," Dados da pr\xE9-matr\xEDcula ",-1),zo=t("p",{class:"text-muted"},[_(" Informe a "),t("strong",null,"s\xE9rie"),_(", "),t("strong",null,"turno"),_(" e a "),t("strong",null,"escola"),_(" que deseja realizar a inscri\xE7\xE3o de pr\xE9-matr\xEDcula para o(a) aluno(a). Caso a escola pretendida "),t("strong",null,"n\xE3o possua vagas dispon\xEDveis"),_(", voc\xEA pode definir a mesma na op\xE7\xE3o 'Selecionar uma escola para aguardar na lista de espera'. ")],-1),Go={key:0},Mo=["href"],Io=_(" Tabela de s\xE9ries recomendadas por faixa et\xE1ria "),Ko=t("i",{class:"fa fa-external-link"},null,-1),Xo=[Io,Ko],Ho={key:1,class:"alert alert-info"},xo=_(" O(a) aluno(a) est\xE1 matriculado(a) atualmente na s\xE9rie "),Jo=_(" na escola "),Qo={key:0},Yo=_(". "),Zo={key:2,class:"alert alert-info"},et=_(" O(a) aluno(a) est\xE1 matriculado atualmente na escola "),st={key:0},ot=_(". "),tt={class:"row"},at={key:0,class:"col-12"},nt={class:"alert alert-info"},rt={key:1,class:"col-12"},lt=t("div",{class:"alert alert-warning"}," N\xE3o h\xE1 escolas pr\xF3ximas ao seu endere\xE7o, ent\xE3o todas as escolas com vagas dispon\xEDveis na s\xE9rie e turno selecionados est\xE3o sendo exibidas. ",-1),dt=[lt],it={key:2,class:"col-12"},ut=t("div",{class:"alert alert-warning"}," N\xE3o h\xE1 escolas com vagas dispon\xEDveis para a s\xE9rie e turno selecionados, selecione em qual escola voc\xEA deseja entrar na lista de espera. ",-1),ct=[ut],mt={key:3,class:"col-12"},gt=t("div",{class:"alert alert-danger"}," N\xE3o h\xE1 escolas dispon\xEDveis para a s\xE9rie e turno selecionados. ",-1),ft=t("div",{class:"col-12 mt-4"}," Qual endere\xE7o deseja usar para buscar a escola mais pr\xF3xima? ",-1),pt={class:"col-sm-6 mt-3"},vt={class:"card-label"},bt=["value"],ht={class:"font-weight-bold",style:{"font-size":"18px"}},yt={class:"small"},At={class:"small"},St={class:"col-sm-6 mt-3"},Lt={class:"card-label"},Pt=["value"],Et={class:"font-weight-bold",style:{"font-size":"18px"}},_t={class:"small"},wt={class:"small"},Ct={class:"col-12"},Nt=t("div",null,[t("strong",null,"Sua resid\xEAncia")],-1),kt=t("div",null,[t("strong",null,"Novo ponto de refer\xEAncia")],-1),jt={key:6,class:"col-12 mt-5"},$t=t("div",{class:"col-12 mt-4"}," Selecione qual escola deseja ficar em lista de espera ",-1),Ot={class:"col-12 mb-3"},Dt=t("div",null,[t("strong",null,"Novo ponto de refer\xEAncia")],-1),Vt={key:1,class:"col-12 mt-3"};function Rt(e,o,b,g,h,l){const S=V("x-btn"),P=V("fields"),y=V("x-field"),O=V("x-card-section"),f=V("x-card"),j=V("google-maps-markers"),R=V("google-maps-marker-component"),n=V("google-maps"),c=V("select-address-position");return m(),A("div",null,[Bo,Fo,To,t("div",Uo,[Wo,u(S,{class:"border-danger text-danger flex-row",label:"Limpar dados","no-caps":"","no-wrap":"",onClick:o[0]||(o[0]=r=>e.$emit("clean"))})]),u(P,{fields:e.modelFields,"onUpdate:fields":o[1]||(o[1]=r=>e.modelFields=r),data:e.modelStudent,"onUpdate:data":o[2]||(o[2]=r=>e.modelStudent=r),errors:e.errors},null,8,["fields","data","errors"]),qo,zo,e.process&&e.process.gradeAgeRangeLink?(m(),A("p",Go,[t("a",{href:e.process.gradeAgeRangeLink,target:"_blank"},Xo,8,Mo)])):L("",!0),e.matchedSchool&&e.matchedGrade?(m(),A("div",Ho,[xo,t("strong",null,D(e.matchedGrade.label),1),Jo,t("strong",null,D(e.matchedSchool.name),1),Number(e.matchedSchool.id)===Number(e.modelStudent.school)?(m(),A("span",Qo," e ela j\xE1 est\xE1 selecionada")):L("",!0),Yo])):e.matchedSchool?(m(),A("div",Zo,[et,t("strong",null,D(e.matchedSchool.name),1),Number(e.matchedSchool.id)===Number(e.modelStudent.school)?(m(),A("span",st," e ela j\xE1 est\xE1 selecionada")):L("",!0),ot])):L("",!0),t("div",tt,[u(y,{modelValue:e.modelStudent.grade,"onUpdate:modelValue":o[3]||(o[3]=r=>e.modelStudent.grade=r),"container-class":"col-12 col-md-6",rules:"required",label:"S\xE9rie",name:"grade",type:"SELECT",options:e.grades,errors:!!e.errors.grade,searchable:!1},null,8,["modelValue","options","errors"]),u(y,{modelValue:e.modelStudent.period,"onUpdate:modelValue":o[4]||(o[4]=r=>e.modelStudent.period=r),"container-class":"col-12 col-md-6",rules:"required",label:"Turno",name:"period",type:"SELECT",options:e.periods,errors:!!e.errors.period,searchable:!1},null,8,["modelValue","options","errors"]),e.suggestedGrades.length?(m(),A("div",at,[t("div",nt,D(e.suggestedGradesMessage),1)])):L("",!0),e.doesntHaveClosestSchools?(m(),A("div",rt,dt)):L("",!0),e.doesntHaveSchoolsWithVacancies?(m(),A("div",it,ct)):L("",!0),e.doesntHaveAnySchools?(m(),A("div",mt,[gt,e.doesntHaveAnySchools?Se((m(),I(y,{key:0,"model-value":null,"container-class":"hidden",rules:"required",label:"",name:"doesntHaveAnySchools",type:"TEXT",errors:!!e.errors.doesntHaveAnySchools},null,8,["errors"])),[[ls,!1]]):L("",!0)])):L("",!0),e.modelResponsible.useSecondAddress?(m(),A(se,{key:4},[ft,t("div",pt,[t("label",vt,[Se(t("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>e.selectedAddress=r),value:e.modelResponsible.address,name:"which_address",type:"radio",class:"card-input"},null,8,bt),[[$e,e.selectedAddress]]),u(f,{bordered:"",hoverable:""},{default:C(()=>[u(O,{class:"font-hind text-blue-dark"},{default:C(()=>[t("div",ht,D(e.filters.joinAddressLine1(e.modelResponsible.address)),1),t("div",yt,D(e.filters.joinAddressLine2(e.modelResponsible.address)),1),t("div",At,D(e.filters.joinAddressLine3(e.modelResponsible.address)),1)]),_:1})]),_:1})])]),t("div",St,[t("label",Lt,[Se(t("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>e.selectedAddress=r),value:e.modelResponsible.secondAddress,name:"which_address",type:"radio",class:"card-input"},null,8,Pt),[[$e,e.selectedAddress]]),u(f,{bordered:"",hoverable:""},{default:C(()=>[u(O,{class:"font-hind text-blue-dark"},{default:C(()=>[t("div",Et,D(e.filters.joinAddressLine1(e.modelResponsible.secondAddress)),1),t("div",_t,D(e.filters.joinAddressLine2(e.modelResponsible.secondAddress)),1),t("div",wt,D(e.filters.joinAddressLine3(e.modelResponsible.secondAddress)),1)]),_:1})]),_:1})])])],64)):L("",!0),e.haveSchoolsWithVacancies&&!e.isWaitingList?(m(),A(se,{key:5},[u(y,{modelValue:e.modelStudent.school,"onUpdate:modelValue":o[7]||(o[7]=r=>e.modelStudent.school=r),"container-class":"col-12 mt-3",rules:"required",label:"Escola",name:"school",type:"SELECT",options:e.closestSchools,errors:!!e.errors.school,searchable:!1},null,8,["modelValue","options","errors"]),u(c,{adjusted:e.adjustedAddressPosition,"onUpdate:adjusted":o[8]||(o[8]=r=>e.adjustedAddressPosition=r),old:e.oldAddressPosition,"onUpdate:old":o[9]||(o[9]=r=>e.oldAddressPosition=r),"allow-responsible-select-map-address":e.modelStage.process.allowResponsibleSelectMapAddress,"old-address-postition":e.oldAddressPosition,"is-using-second-address":e.isUsingSecondAddress,onUndoAddressPosition:o[10]||(o[10]=r=>e.handleUndoAddressPosition(e.oldAddressPosition)),onConfirmNewLocation:o[11]||(o[11]=r=>(e.oldAddressPosition={secondAddress:e.isUsingSecondAddress,lat:e.selectedAddress.lat,lng:e.selectedAddress.lng},e.handleConfirmNewLocation(e.oldAddressPosition,e.adjustedAddressPosition))),onSetNewLocation:e.handleSetNewLocation,onCancelNewLocation:e.handleCancelNewLocation},{map:C(({adjustAddress:r,setNewPosition:T})=>[t("div",Ct,[u(f,{bordered:""},{default:C(()=>[u(n,{config:e.store.map.config,lat:e.lat,lng:e.lng,zoom:e.store.map.zoom,style:{height:"400px"},tabindex:"-1"},{default:C(({map:k})=>[u(j,{markers:e.markerClosestSchools,map:k,onClick:e.selectFirstSchool},{default:C(({marker:F})=>[t("div",null,[t("strong",null,D(F.name),1)])]),_:2},1032,["markers","map","onClick"]),e.selectedAddress?(m(),I(R,{key:0,map:k,marker:e.marker},{default:C(()=>[Nt]),_:2},1032,["map","marker"])):L("",!0),r?(m(),I(R,{key:1,map:k,marker:e.markerAdjustedAddress,draggable:"",onNewPosition:T},{default:C(()=>[kt]),_:2},1032,["map","marker","onNewPosition"])):L("",!0)]),_:2},1032,["config","lat","lng","zoom"])]),_:2},1024)])]),_:1},8,["adjusted","old","allow-responsible-select-map-address","old-address-postition","is-using-second-address","onSetNewLocation","onCancelNewLocation"])],64)):L("",!0),!e.modelStudent.useSecondSchool&&e.allowWaitingList?(m(),A("div",jt,[u(S,{class:"w-100",color:"primary",label:"Selecionar uma escola para aguardar na lista de espera","no-caps":"","no-wrap":"",onClick:e.setUseSecondSchool},null,8,["onClick"])])):L("",!0),e.showWaitingListOption?(m(),A(se,{key:7},[$t,e.isWaitingList?L("",!0):(m(),I(y,{key:0,modelValue:e.modelStudent.secondPeriod,"onUpdate:modelValue":o[12]||(o[12]=r=>e.modelStudent.secondPeriod=r),"container-class":"col-12 col-md-6",rules:"required",label:"Turno",name:"secondPeriod",type:"SELECT",options:e.periods,errors:!!e.errors.secondPeriod,searchable:!1},null,8,["modelValue","options","errors"])),u(y,{modelValue:e.modelStudent.secondSchool,"onUpdate:modelValue":o[13]||(o[13]=r=>e.modelStudent.secondSchool=r),"container-class":"col-12",rules:"required",label:"Escola (lista de espera)",name:"secondSchool",type:"SELECT",options:e.optionalSchools,errors:!!e.errors.secondSchool,searchable:!1},null,8,["modelValue","options","errors"]),u(c,{adjusted:e.adjustedWaitingListAddressPosition,"onUpdate:adjusted":o[14]||(o[14]=r=>e.adjustedWaitingListAddressPosition=r),old:e.oldWaitingListAddressPosition,"onUpdate:old":o[15]||(o[15]=r=>e.oldWaitingListAddressPosition=r),"allow-responsible-select-map-address":e.modelStage.process.allowResponsibleSelectMapAddress&&!e.modelStudent.useSecondSchool,"old-address-postition":e.oldAddressPosition,"is-using-second-address":e.isUsingSecondAddress,onUndoAddressPosition:o[16]||(o[16]=r=>e.handleUndoAddressPosition(e.oldWaitingListAddressPosition)),onConfirmNewLocation:o[17]||(o[17]=r=>(e.oldWaitingListAddressPosition={secondAddress:e.isUsingSecondAddress,lat:e.selectedAddress.lat,lng:e.selectedAddress.lng},e.handleConfirmNewLocation(e.oldWaitingListAddressPosition,e.adjustedWaitingListAddressPosition))),onSetNewLocation:e.handleSetNewLocation,onCancelNewLocation:e.handleCancelNewLocation},{map:C(({adjustAddress:r,setNewPosition:T})=>[t("div",Ot,[u(f,{bordered:""},{default:C(()=>[u(n,{config:e.store.map.config,lat:e.lat,lng:e.lng,zoom:e.store.map.zoom,style:{height:"400px"},tabindex:"-1"},{default:C(({map:k})=>[u(j,{markers:e.markerOptionalSchools,map:k,onClick:e.selectSecondSchool},{default:C(({marker:F})=>[t("div",null,[t("strong",null,D(F.label),1)])]),_:2},1032,["markers","map","onClick"]),u(R,{map:k,marker:e.marker},{default:C(()=>[t("div",null,[t("strong",null,D(e.marker.title),1)])]),_:2},1032,["map","marker"]),r?(m(),I(R,{key:0,map:k,marker:e.markerAdjustedAddress,draggable:"",onNewPosition:T},{default:C(()=>[Dt]),_:2},1032,["map","marker","onNewPosition"])):L("",!0)]),_:2},1032,["config","lat","lng","zoom"])]),_:2},1024)])]),_:1},8,["adjusted","old","allow-responsible-select-map-address","old-address-postition","is-using-second-address","onSetNewLocation","onCancelNewLocation"]),e.isWaitingList?L("",!0):(m(),A("div",Vt,[u(S,{class:"w-100",color:"primary",label:"N\xE3o usar a op\xE7\xE3o para aguardar na lista de espera","no-caps":"","no-wrap":"",onClick:e.doesntuseSecondSchool},null,8,["onClick"])]))],64)):L("",!0)])])}var Gt=De(Ro,[["render",Rt]]);export{qt as R,Gt as S,zt as _};
