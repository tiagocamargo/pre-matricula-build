var je=Object.defineProperty,Se=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var de=(c,e,s)=>e in c?je(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s,q=(c,e)=>{for(var s in e||(e={}))Oe.call(e,s)&&de(c,s,e[s]);if(oe)for(var s of oe(e))ke.call(e,s)&&de(c,s,e[s]);return c},te=(c,e)=>Se(c,De(e));import{i as G,l as k,k as ae,g as se,a as ne,_ as le,A as Ce,n as Ve,X as K}from"./common.017a279d.js";import{a as Fe}from"./vue3-apexcharts.a57dfe3f.js";import{d as Z,o as p,a as h,F as H,j as ie,b as a,l as g,p as N,_ as Ie,c as W,A as re,v as V,B as C,D as S,m as E,O as F,r as P,k as ce,L as Pe,t as Be,a5 as Me,N as Re,Y as J}from"./vendor.1f347d3d.js";import{_ as Te}from"./shared/preregistrations/vacancy.e136e44e.js";import"./@vueuse/core.ebf6af6e.js";import"./vue-the-mask.7c8603ed.js";import"./flatpickr.cab88106.js";import"./froala-editor.fa4daa16.js";const Ne={class:"row"},Le={class:"d-flex justify-content-between mb-4"},We={class:"d-flex justify-content-center"},Ye={class:"row p-3"},qe={class:"col-12 px-3"},ze={class:"d-flex justify-content-between"},Ue={class:"w-75"},Ge={class:"w-25"},He={class:"mt-2",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},Xe={class:"mt-4",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},Ke={class:"row mt-4"},Ze={class:"col-12"},Je=Z({__name:"CardVacancies",setup(c){return(e,s)=>(p(),h("div",Ne,[(p(),h(H,null,ie(4,o=>a("div",{key:o+"-skeleton-card-vacancies",class:"col-12 col-md-6 mt-4"},[g(ae,{bordered:""},{default:N(()=>[g(G,null,{default:N(()=>[a("div",Le,[g(k,{class:"w-60"}),g(k,{class:"w-30"})]),a("div",We,[g(k,{height:"300px",width:"300px",type:"circle"})]),a("div",Ye,[a("div",qe,[a("div",ze,[a("div",Ue,[g(k,{width:"60%"}),g(k,{width:"60%",type:"text"})]),a("div",Ge,[g(k,{type:"text"}),g(k,{type:"text"})])]),a("div",He,[g(k,{class:"w-100"}),g(k,{class:"w-100",type:"text"}),g(k,{class:"w-100",height:"5px"})]),a("div",Xe,[g(k,{class:"w-100"}),g(k,{class:"w-100",type:"text"}),g(k,{class:"w-100",height:"5px"})])])]),a("div",Ke,[a("div",Ze,[g(k,{type:"button",height:"50px"})])])]),_:1})]),_:1})])),64))]))}});const Qe={style:{background:"transparent",width:"75px",height:"300px",padding:"0 10px",overflow:"hidden"}},et={style:{height:"220px",width:"14px",margin:"-0.25rem auto"}},tt={class:"cv-opened"},at={class:"cv-waiting"},nt={class:"cv-rejected"},lt={class:"cv-accepted"},st={key:0,class:"text-center mt-4 bg-danger exceded"},it={class:"small text-muted"},ot={class:"font-weight-bolder"},dt={key:1,class:"text-center mt-4"},rt={class:"small text-muted"},ct={class:"font-weight-bolder"},ut=Z({__name:"GradeVacancy",props:{data:null,grade:null},setup(c){const e=c,s=A=>A<=0?0:Math.ceil(A),o=W(()=>e.data.available+e.data.accepted+e.data.rejected+e.data.waiting),n=W(()=>s(e.data.available/o.value*100)),l=W(()=>s(e.data.accepted/o.value*100)),v=W(()=>s(e.data.rejected/o.value*100)),m=W(()=>s(e.data.waiting/o.value*100));return(A,y)=>{const i=re("tooltip");return p(),h("div",Qe,[a("div",et,[V(n)>0?(p(),h("div",{key:0,style:C(`height: ${V(n)}%; padding: 0.25rem 0`)},[S(a("div",tt,null,512),[[i,`${c.data.available}`,void 0,{right:!0}]])],4)):E("",!0),V(m)>0?(p(),h("div",{key:1,style:C(`height: ${V(m)}%; padding: 0.25rem 0`)},[S(a("div",at,null,512),[[i,`${c.data.waiting}`,void 0,{right:!0}]])],4)):E("",!0),V(v)>0?(p(),h("div",{key:2,style:C(`height: ${V(v)}%; padding: 0.25rem 0`)},[S(a("div",nt,null,512),[[i,`${c.data.rejected}`,void 0,{right:!0}]])],4)):E("",!0),V(l)>0?(p(),h("div",{key:3,style:C(`height: ${V(l)}%; padding: 0.25rem 0`)},[S(a("div",lt,null,512),[[i,`${c.data.accepted}`,void 0,{right:!0}]])],4)):E("",!0)]),c.data.exceded?S((p(),h("div",st,[a("div",it,F(c.grade),1),a("div",ot,F(c.data.total),1)])),[[i,"Indica que h\xE1 turmas desta s\xE9rie que tiveram suas vagas excedidas"]]):(p(),h("div",dt,[a("div",rt,F(c.grade),1),a("div",ct,F(c.data.total),1)]))])}}});var pt=Ie(ut,[["__scopeId","data-v-99b04ee6"]]);const R=c=>Math.trunc(c*1e4)/100,vt=c=>{const e=te(q({},c),{unavailable:0,exceded:0,ultrapassed:0,percentual:{accepted:0,available:0,unavailable:0,exceded:0,totalExceded:0,total:0,waiting:0,waitingRealAvailable:0,waitingExceded:0,waitingAvailable:0}});return e.available<0&&(e.exceded=Math.abs(e.available),e.available=0),e.accepted>e.total&&(e.ultrapassed=e.accepted-e.total),e.unavailable=e.total-e.accepted-e.available,e.max=e.total+e.exceded+e.ultrapassed,e.totalExceded=e.exceded+e.ultrapassed,e.percentual.total=R(e.total/e.max),e.percentual.totalExceded=R(e.totalExceded/e.max),e.percentual.accepted=R(e.accepted/e.max),e.percentual.available=R(e.available/e.max),e.percentual.unavailable=R(e.unavailable/e.max),e.percentual.exceded=R(e.exceded/e.max),e.waitingAvailable=e.available-e.waiting,e.waitingExceded=0,e.waitingAvailable<0&&(e.waitingExceded=Math.abs(e.waitingAvailable),e.waitingAvailable=0),e.maxWaiting=Math.max(e.available,e.waiting),e.percentual.waiting=R(e.waiting/e.maxWaiting),e.percentual.waitingRealAvailable=R(e.waitingAvailable/e.maxWaiting),e.percentual.waitingAvailable=R(e.available/e.maxWaiting),e.percentual.waitingExceded=R(e.waitingExceded/e.maxWaiting),e},ht=()=>se({query:`
      query all {
        processes {
          data {
            totalPreRegistrations
            schoolYear {
              year
            }
          }
        }
      }
    `}).then(e=>e.data.data.processes.data),mt=c=>se({variables:c,query:`
      query process(
        $process: ID!
        $schools: [ID!]
        $grades: [ID!]
        $periods: [ID!]
      ) {
        process(
          id: $process
        ) {
          grades {
            id
            name
          }
        }
        statistics: getProcessVacancyStatistics(
          process: $process
          schools: $schools
          grades: $grades
          periods: $periods
        ) {
          grade
          period
          school
          total
          waiting
          accepted
          rejected
          available: availableVacancies
        }
      }
    `}).then(s=>({grades:s.data.data.process.grades.map(n=>te(q({},n),{total:0,available:0,waiting:0,accepted:0,rejected:0,exceded:!1})),statistics:s.data.data.statistics})),gt=c=>se({variables:c,query:`
      query processes(
        $schools: [ID!]
        $schoolsAllowed: [ID!]
        $grades: [ID!]
        $periods: [ID!]
        $year: Int
      ) {
        processes: getProcessVacancyTotal(
          schools: $schools
          grades: $grades
          periods: $periods
          year: $year
        ) {
          process {
            id
            name
          }
          total
          available: availableVacancies
          waiting
          rejected
          accepted
          excededVacancies
        }
        schools(
          first: 100
          schools: $schoolsAllowed
        ) {
          data {
            id
            name
            key: id
            label: name
          }
        }
        grades(
          first: 100
        ) {
          data {
            id
            name
            key: id
            label: name
          }
        }
        periods {
          data {
            id
            name
            key: id
            label: name
          }
        }
      }
    `}).then(s=>{const o=s.data.data.processes.map(l=>vt(l)).map(l=>q(q({},l),l.process)).sortBy("name"),n=o.reduce((l,v)=>({vacancies:v.total+l.vacancies,total:v.accepted+v.rejected+v.waiting+l.total,accepted:v.accepted+l.accepted,rejected:v.rejected+l.rejected,waiting:v.waiting+l.waiting}),{vacancies:0,total:0,accepted:0,rejected:0,waiting:0});return{grades:s.data.data.grades.data,periods:s.data.data.periods.data,processes:o,schools:s.data.data.schools.data,stats:n}});const ft={key:0,"data-test":"vacancy-by-grades-detail",class:"cv-container mt-3"},xt=Z({__name:"VacanciesByGrades",props:{filter:{default:()=>({})},process:null},setup(c){const e=c,{loading:s,loader:o}=ne(),n=P(!1),l=P([]),v=W(()=>e.filter.grade?l.value.filter(y=>Number(y.id)===Number(e.filter.grade)):l.value),m=y=>{y&&(l.value=[],n.value=!y),y||A()},A=()=>{const y={process:e.process};e.filter.school&&(y.schools=[e.filter.school]),e.filter.grade&&(y.grades=[e.filter.grade]),e.filter.period&&(y.periods=[e.filter.period]),o(()=>mt(y)).then(({grades:i,statistics:D})=>{D.forEach(w=>{const O=i.find(I=>Number(I.id)===Number(w.grade));O&&(O.available+=w.available,O.total+=w.total,O.waiting+=w.waiting,O.accepted+=w.accepted,O.rejected+=w.rejected,w.available<0&&(O.exceded=!0))}),l.value=i.sortBy("name"),n.value=!0})};return(y,i)=>(p(),h("div",null,[n.value?(p(),h("div",ft,[(p(!0),h(H,null,ie(V(v),D=>(p(),h(H,null,[D.total?(p(),ce(pt,{key:D.id,data:D,grade:D.name,class:"d-inline-block"},null,8,["data","grade"])):E("",!0)],64))),256))])):E("",!0),g(le,{label:n.value?"Ocultar Detalhes":"Ver mais detalhes","data-test":"vacancy-card-see-more",color:"primary",class:"w-100 mt-3",loading:V(s),size:"lg","loading-normal":"","no-caps":"","no-wrap":"",onClick:i[0]||(i[0]=D=>m(n.value))},null,8,["label","loading"])]))}});var ue={exports:{}};(function(c){c.exports=function(e){var s={};function o(n){if(s[n])return s[n].exports;var l=s[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=s,o.d=function(n,l,v){o.o(n,l)||Object.defineProperty(n,l,{enumerable:!0,get:v})},o.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,l){if(l&1&&(n=o(n)),l&8||l&4&&typeof n=="object"&&n&&n.__esModule)return n;var v=Object.create(null);if(o.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:n}),l&2&&typeof n!="string")for(var m in n)o.d(v,m,function(A){return n[A]}.bind(null,m));return v},o.n=function(n){var l=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(l,"a",l),l},o.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},o.p="",o(o.s="fb15")}({8875:function(e,s,o){var n,l,v;(function(m,A){l=[],n=A,v=typeof n=="function"?n.apply(s,l):n,v!==void 0&&(e.exports=v)})(typeof self!="undefined"?self:this,function(){function m(){var A=Object.getOwnPropertyDescriptor(document,"currentScript");if(!A&&"currentScript"in document&&document.currentScript||A&&A.get!==m&&document.currentScript)return document.currentScript;try{throw new Error}catch(u){var y=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,i=/@([^@]*):(\d+):(\d+)\s*$/ig,D=y.exec(u.stack)||i.exec(u.stack),w=D&&D[1]||!1,O=D&&D[2]||!1,I=document.location.href.replace(document.location.hash,""),$,Y,L,d=document.getElementsByTagName("script");w===I&&($=document.documentElement.outerHTML,Y=new RegExp("(?:[^\\n]+?\\n){0,"+(O-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),L=$.replace(Y,"$1").trim());for(var b=0;b<d.length;b++)if(d[b].readyState==="interactive"||d[b].src===w||w===I&&d[b].innerHTML&&d[b].innerHTML.trim()===L)return d[b];return null}}return m})},"8bbf":function(e,s){e.exports=Ce},"95e6":function(e,s){e.exports=Fe.exports},fb15:function(e,s,o){if(o.r(s),typeof window!="undefined"){var n=window.document.currentScript;{var l=o("8875");n=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var v=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);v&&(o.p=v[1])}var m=o("8bbf"),A=o("95e6"),y=o.n(A);const i=["animationEnd","beforeMount","mounted","updated","click","mouseMove","legendClick","markerClick","selection","dataPointSelection","dataPointMouseEnter","dataPointMouseLeave","beforeZoom","beforeResetZoom","zoomed","scrolled","scrolled"];var w=Object(m.defineComponent)({name:"apexchart",props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0},width:{default:"100%"},height:{default:"auto"}},emits:i,setup($,{emit:Y}){const L=Object(m.ref)(null),d=Object(m.ref)(null),b=r=>r&&typeof r=="object"&&!Array.isArray(r)&&r!=null,u=(r,x)=>{typeof Object.assign!="function"&&function(){Object.assign=function(j){if(j==null)throw new TypeError("Cannot convert undefined or null to object");let X=Object(j);for(let Q=1;Q<arguments.length;Q++){let U=arguments[Q];if(U!=null)for(let ee in U)U.hasOwnProperty(ee)&&(X[ee]=U[ee])}return X}}();let T=Object.assign({},r);return b(r)&&b(x)&&Object.keys(x).forEach(j=>{b(x[j])?j in r?T[j]=u(r[j],x[j]):Object.assign(T,{[j]:x[j]}):Object.assign(T,{[j]:x[j]})}),T},f=async()=>{await Object(m.nextTick)();const r={chart:{type:$.type||$.options.chart.type||"line",height:$.height,width:$.width,events:{}},series:$.series};i.forEach(T=>{let j=(...X)=>Y(T,...X);r.chart.events[T]=j});const x=u($.options,r);return d.value=new y.a(L.value,x),d.value.render()},t=()=>(_(),f()),_=()=>{d.value.destroy()},B=(r,x)=>d.value.updateSeries(r,x),M=(r,x,T,j)=>d.value.updateOptions(r,x,T,j),pe=r=>d.value.toggleSeries(r),ve=r=>{d.value.showSeries(r)},he=r=>{d.value.hideSeries(r)},me=(r,x)=>d.value.appendSeries(r,x),ge=()=>{d.value.resetSeries()},fe=(r,x)=>{d.value.toggleDataPointSelection(r,x)},xe=r=>d.value.appendData(r),be=(r,x)=>d.value.zoomX(r,x),_e=()=>d.value.dataURI(),ye=(r,x)=>{d.value.addXaxisAnnotation(r,x)},we=(r,x)=>{d.value.addYaxisAnnotation(r,x)},$e=(r,x)=>{d.value.addPointAnnotation(r,x)},Ee=(r,x)=>{d.value.removeAnnotation(r,x)},Ae=()=>{d.value.clearAnnotations()};Object(m.onBeforeMount)(()=>{window.ApexCharts=y.a}),Object(m.onMounted)(()=>{L.value=Object(m.getCurrentInstance)().proxy.$el,f()}),Object(m.onBeforeUnmount)(()=>{!d.value||_()});const z=Object(m.toRefs)($);return Object(m.watch)(z.options,()=>{!d.value&&$.options?f():d.value.updateOptions($.options)}),Object(m.watch)(z.series,()=>{!d.value&&$.series?f():d.value.updateSeries($.series)},{deep:!0}),Object(m.watch)(z.type,()=>{t()}),Object(m.watch)(z.width,()=>{t()}),Object(m.watch)(z.height,()=>{t()}),{chart:d,init:f,refresh:t,destroy:_,updateOptions:M,updateSeries:B,toggleSeries:pe,showSeries:ve,hideSeries:he,resetSeries:ge,zoomX:be,toggleDataPointSelection:fe,appendData:xe,appendSeries:me,addXaxisAnnotation:ye,addYaxisAnnotation:we,addPointAnnotation:$e,removeAnnotation:Ee,clearAnnotations:Ae,dataURI:_e}},render(){return Object(m.h)("div",{class:"vue-apexcharts"})}});const O=$=>{$.component(w.name,w)};w.install=O;var I=w;s.default=I}})})(ue);var bt=Pe(ue.exports);const _t=a("h1",null," Painel de Vagas ",-1),yt={class:"row m-0 mt-1 filter-gutters"},wt={class:"d-flex m-0 mt-3 filter-gutters justify-content-end"},$t=Me('<div class="row legend-wrapper ml-1"><div class="bg-green mr-1 mb-1"></div><span>DEFERIDAS</span><div class="bg-danger mr-1 mb-1"></div><span>INDEFERIDAS</span><div class="bg-yellow mr-1 mb-1"></div><span>EM ESPERA</span><div class="bg-light mr-1 mb-1"></div><span>INDISPON\xCDVEL</span><div class="open-legend mr-1 mb-1"></div><span>ABERTAS</span></div>',1),Et={class:"row"},At={class:"d-flex justify-content-between"},jt={"data-test":"vacancy-card-title",class:"font-hind-18-primary text-primary m-0 text-truncate"},St={key:0,class:"badge badge-red d-flex align-items-center pl-2 pr-2 pt-0 pb-0"},Dt=J(" Vagas excedidas "),Ot=[Dt],kt={class:"row p-3"},Ct={class:"col-12 px-3"},Vt={class:"d-flex"},Ft=a("div",null,[a("div",null,"Inscri\xE7\xF5es deferidas"),a("div",{class:"text-muted small"},[J(" em rela\xE7\xE3o ao total de "),a("strong",null,"vagas ofertadas")])],-1),It={class:"ml-auto text-right"},Pt={"data-test":"vacancy-card-relation"},Bt={"data-test":"vacancy-card-relation-percentage",class:"text-muted small"},Mt={class:"d-flex mt-2",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},Rt=a("div",{class:"bg-red",style:{"max-width":"100%",height:"14px","border-radius":"4px"}},null,-1),Tt=[Rt],Nt=a("div",{class:"bg-green",style:{"max-width":"100%",height:"14px","border-radius":"4px"}},null,-1),Lt=[Nt],Wt=a("div",{class:"bg-light",style:{"max-width":"100%",height:"14px","border-radius":"4px"}},null,-1),Yt=[Wt],qt=a("div",{style:{"max-width":"100%",border:"1px solid #d8e9ff",height:"14px","border-radius":"4px"}},null,-1),zt=[qt],Ut={class:"d-flex mt-2",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},Gt=a("div",{class:"bg-danger",style:{"max-width":"100%",height:"4px","border-radius":"4px"}},null,-1),Ht=[Gt],Xt=a("div",{class:"bg-info",style:{"max-width":"100%",height:"4px","border-radius":"4px"}},null,-1),Kt=[Xt],Zt={class:"row p-3"},Jt={class:"col-12 px-3"},Qt={class:"d-flex"},ea=a("div",null,[a("div",null,"Inscri\xE7\xF5es em espera"),a("div",{class:"text-muted small"},[J(" em rela\xE7\xE3o a quantidade de "),a("strong",null,"vagas dispon\xEDveis")])],-1),ta={key:0,class:"ml-auto text-right"},aa={key:0,class:"text-muted small"},na={key:1,class:"text-muted small"},la={class:"d-flex mt-2",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},sa=a("div",{class:"bg-yellow",style:{"max-width":"100%",height:"14px","border-radius":"4px"}},null,-1),ia=[sa],oa=a("div",{style:{"max-width":"100%",border:"1px solid #d8e9ff",height:"14px","border-radius":"4px"}},null,-1),da=[oa],ra={class:"d-flex mt-2",style:{"margin-left":"-0.25rem","margin-right":"-0.25rem"}},ca=a("div",{class:"bg-danger",style:{"max-width":"100%",height:"4px","border-radius":"4px"}},null,-1),ua=[ca],pa=a("div",{class:"bg-info",style:{"max-width":"100%",height:"4px","border-radius":"4px"}},null,-1),va=[pa],ha={key:1,class:"small mt-3 text-info"},Ea=Z({__name:"Vacancies",setup(c){const{loader:e,loading:s}=ne(),{loader:o,loading:n}=ne(),l=Ve(),v=P([]),m=P([]),A=P([]),y=P([]),i=P({school:null,period:null,grade:null,year:null,canAcceptInBatch:!1}),D=P({school:null,period:null,grade:null,year:null,canAcceptInBatch:!1}),w=P(),O=P([]),I=P([]),$=W(()=>s.value||n.value),Y=()=>{e(ht).then(b=>{const u=[],f=[];b.forEach(_=>{_.totalPreRegistrations>0?u.push(_.schoolYear.year):f.push(_.schoolYear.year)}),u.sort().reverse();const t=u[0];O.value=u.concat(f).filter((_,B,M)=>M.indexOf(_)===B).map(_=>({key:_,label:_})).sortBy("key").reverse(),t&&(i.value.year=t),d()})},L=()=>{i.value=q({},D.value),d()},d=()=>{I.value=[];const b={};i.value.school?b.schools=[i.value.school]:l.isSecretary&&(b.schools=l.getUserSchools),l.isSecretary&&(b.schoolsAllowed=l.getUserSchools),i.value.grade&&(b.grades=[i.value.grade]),i.value.period&&(b.periods=[i.value.period]),i.value.year&&(b.year=i.value.year),v.value=[],o(()=>gt(b)).then(u=>{v.value=u.processes,m.value=u.schools.sortBy("name"),A.value=u.grades.sortBy("name"),y.value=u.periods.sortBy("name"),w.value=u.stats,m.value.length===1&&(i.value.school=m.value[0].id),v.value.forEach(f=>{const t={legend:{show:!1},dataLabels:{enabled:!1},colors:["#CCFAB6","#EC6F8C","#FFF495"],states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},stroke:{show:!0,curve:"smooth",lineCap:"butt",colors:["#CCFAB6","#EC6F8C","#FFF495"],width:2,dashArray:0},series:[0,0,0],labels:["DEFERIDAS","INDEFERIDAS","EM ESPERA"],plotOptions:{pie:{expandOnClick:!1,donut:{size:"75%",labels:{show:!0,name:{offsetY:25},value:{fontSize:"42px",fontFamily:"Hind",fontWeight:"bold",color:"rgba(0, 0, 0, 0.8)",offsetY:-25},total:{show:!0,showAlways:!0,label:"INSCRI\xC7\xD5ES",fontSize:"13px",fontFamily:"Hind",fontWeight:"normal",color:"rgba(0, 0, 0, 0.5)",formatter:_=>_.globals.seriesTotals.reduce((B,M)=>B+M)}}}}},tooltip:{custom:_=>{const B=_.w.globals.labels[_.seriesIndex];return`<span style="padding: 4px 8px">${_.series[_.seriesIndex]} ${B}</span>`}}};I.value.push({options:t,series:[f.accepted,f.rejected,f.waiting],id:f.id})})})};return Be(()=>Y()),(b,u)=>{const f=re("tooltip");return p(),h("main",null,[_t,g(Te,{stats:w.value},null,8,["stats"]),g(ae,{class:"bg-primary mb-4"},{default:N(()=>[g(G,{class:"pl-2 pr-2"},{default:N(()=>[a("form",{onSubmit:u[8]||(u[8]=Re(t=>d(),["prevent"]))},[a("div",yt,[g(K,{modelValue:i.value.year,"onUpdate:modelValue":u[0]||(u[0]=t=>i.value.year=t),"container-class":"col-12 col-md-2 mb-md-0",name:"year",placeholder:"Ano",type:"SELECT",options:O.value},null,8,["modelValue","options"]),g(K,{modelValue:i.value.school,"onUpdate:modelValue":u[1]||(u[1]=t=>i.value.school=t),"container-class":"col-12 col-md-4 mb-md-0",name:"school",placeholder:"Filtrar por escola",type:"SELECT",options:m.value,searchable:"",onChange:u[2]||(u[2]=t=>i.value.canAcceptInBatch=!1)},null,8,["modelValue","options"]),g(K,{modelValue:i.value.grade,"onUpdate:modelValue":u[3]||(u[3]=t=>i.value.grade=t),"container-class":"col-12 col-md mb-md-0",name:"grade",placeholder:"Filtrar por s\xE9rie",type:"SELECT",options:A.value,searchable:"",onChange:u[4]||(u[4]=t=>i.value.canAcceptInBatch=!1)},null,8,["modelValue","options"]),g(K,{modelValue:i.value.period,"onUpdate:modelValue":u[5]||(u[5]=t=>i.value.period=t),"container-class":"col-12 col-md mb-md-0",name:"period",placeholder:"Filtrar por turno",type:"SELECT",options:y.value.map(t=>({key:t.id,label:t.name})),onChange:u[6]||(u[6]=t=>i.value.canAcceptInBatch=!1)},null,8,["modelValue","options"])]),a("div",wt,[a("div",null,[g(le,{"data-test":"vacancy-btn-clear",label:"Limpar",color:"white",flat:"",class:"mr-3","no-caps":"","no-wrap":"",onClick:L}),g(le,{"data-test":"vacancy-btn-search",label:"Buscar",color:"white",outline:"",class:"mr-2","no-caps":"","no-wrap":"",loading:V($),"loading-normal":"",onClick:u[7]||(u[7]=t=>d())},null,8,["loading"])])])],32)]),_:1})]),_:1}),$t,V($)?(p(),ce(Je,{key:0})):E("",!0),a("div",Et,[(p(!0),h(H,null,ie(v.value,t=>(p(),h("div",{key:t.id,"data-test":"vacancy-card",class:"col-12 col-md-6 mt-4"},[g(ae,{bordered:""},{default:N(()=>[g(G,{class:"p-3"},{default:N(()=>[a("div",At,[S((p(),h("h3",jt,[J(F(t.name),1)])),[[f,t.name,void 0,{"bottom-start":!0}]]),t.excededVacancies?S((p(),h("div",St,Ot)),[[f,"Indica que h\xE1 turmas que excederam suas vagas dentro do processo",void 0,{"bottom-start":!0}]]):E("",!0)])]),_:2},1024),g(G,null,{default:N(()=>{var _,B;return[g(V(bt),{options:(_=I.value.find(M=>M.id===t.id))==null?void 0:_.options,series:(B=I.value.find(M=>M.id===t.id))==null?void 0:B.series,enabled:!1,height:"300px",type:"donut"},null,8,["options","series"]),a("div",kt,[a("div",Ct,[a("div",Vt,[Ft,a("div",It,[a("div",Pt,F(t.accepted)+"/"+F(t.total),1),a("div",Bt,F(Math.trunc(t.accepted/t.total*100))+"%",1)])]),a("div",Mt,[t.percentual.exceded>0?S((p(),h("div",{key:0,style:C(`width: ${t.percentual.exceded}%`),class:"cp"},Tt,4)),[[f,`Vagas excedidas: ${t.exceded} (${t.percentual.exceded}%)`,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.accepted>0?S((p(),h("div",{key:1,style:C(`width: ${t.percentual.accepted}%`),class:"cp"},Lt,4)),[[f,`Vagas deferidas: ${t.accepted} (${t.percentual.accepted}%)`,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.unavailable>0?S((p(),h("div",{key:2,style:C(`width: ${t.percentual.unavailable}%`),class:"cp"},Yt,4)),[[f,`
                      Vagas indispon\xEDveis: ${t.unavailable} (${t.percentual.unavailable}%)
                    `,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.available>0?S((p(),h("div",{key:3,style:C(`width: ${t.percentual.available}%`),class:"cp"},zt,4)),[[f,`Vagas dispon\xEDveis: ${t.available} (${t.percentual.available}%)`,void 0,{"bottom-end":!0}]]):E("",!0)]),a("div",Ut,[t.percentual.totalExceded>0?S((p(),h("div",{key:0,style:C(`width: ${t.percentual.totalExceded}%`),class:"cp"},Ht,4)),[[f,`
                      Total de vagas ultrapassadas: ${t.totalExceded} (${t.percentual.totalExceded}%)
                    `,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.total>0?S((p(),h("div",{key:1,style:C(`width: ${t.percentual.total}%`),class:"cp"},Kt,4)),[[f,`Total de vagas dispon\xEDveis: ${t.total} (${t.percentual.total}%)`,void 0,{"bottom-end":!0}]]):E("",!0)])])]),a("div",Zt,[a("div",Jt,[a("div",Qt,[ea,t.waiting||t.available?(p(),h("div",ta,[a("div",null,F(t.waiting)+"/"+F(t.available),1),t.available?(p(),h("div",aa,F(t.percentual.waiting)+"% ",1)):(p(),h("div",na,F(t.waiting*100)+"% ",1))])):E("",!0)]),t.waiting||t.available?(p(),h(H,{key:0},[a("div",la,[t.percentual.waiting>0?S((p(),h("div",{key:0,style:C(`width: ${t.percentual.waiting}%`),class:"cp"},ia,4)),[[f,`Vagas em espera: ${t.waiting}`,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.waitingRealAvailable>0?S((p(),h("div",{key:1,style:C(`width: ${t.percentual.waitingRealAvailable}%`),class:"cp"},da,4)),[[f,`
                      Vagas dispon\xEDveis: ${t.waitingAvailable}
                    `,void 0,{"bottom-end":!0}]]):E("",!0)]),a("div",ra,[t.percentual.waitingExceded>0?S((p(),h("div",{key:0,style:C(`width: ${t.percentual.waitingExceded}%`),class:"cp"},ua,4)),[[f,`
                      Total de vagas ultrapassadas: ${t.waitingExceded} (${t.percentual.waitingExceded}%)
                    `,void 0,{"bottom-end":!0}]]):E("",!0),t.percentual.waitingAvailable>0?S((p(),h("div",{key:1,style:C(`width: ${t.percentual.waitingAvailable}%`),class:"cp"},va,4)),[[f,`
                      Total de vagas dispon\xEDveis: ${t.available} (${t.percentual.waitingAvailable}%)
                    `,void 0,{"bottom-end":!0}]]):E("",!0)])],64)):(p(),h("div",ha," N\xE3o h\xE1 vagas dispon\xEDveis nem inscri\xE7\xF5es em lista de espera. "))])])]}),_:2},1024),g(G,null,{default:N(()=>[g(xt,{filter:i.value,process:t.id},null,8,["filter","process"])]),_:2},1024)]),_:2},1024)]))),128))])])}}});export{Ea as default};
